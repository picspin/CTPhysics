(()=>{var e={};e.id=37,e.ids=[37],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3978:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>o}),s(9892),s(6441),s(5866);var a=s(3191),i=s(8716),r=s(7922),l=s.n(r),n=s(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let o=["",{children:["reconstruction",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9892)),"E:\\Projects\\CTPhysics\\app\\reconstruction\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,6441)),"E:\\Projects\\CTPhysics\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["E:\\Projects\\CTPhysics\\app\\reconstruction\\page.jsx"],m="/reconstruction/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/reconstruction/page",pathname:"/reconstruction",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},4495:(e,t,s)=>{Promise.resolve().then(s.bind(s,7982))},6592:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(326);s(7577);let i=({tabs:e,activeTab:t,onChange:s,className:i=""})=>(0,a.jsxs)("div",{className:`mb-6 overflow-x-auto ${i}`,children:[a.jsx("div",{className:"flex space-x-2",children:e.map(e=>a.jsx("button",{onClick:()=>s(e.id),className:`whitespace-nowrap rounded-xl px-4 py-2.5 text-sm font-medium transition-all duration-300 ${t===e.id?"bg-primary-100 text-white shadow-md":"bg-bg-200/70 text-text-200 hover:bg-bg-300/50 hover:text-text-100"}`,children:e.label},e.id))}),a.jsx("div",{className:"mt-2 h-0.5 w-full bg-bg-300/50",children:e.map(s=>a.jsx("div",{className:`h-full transition-all duration-300 ${t===s.id?"bg-primary-100":"bg-transparent"}`,style:{width:`${100/e.length}%`,transform:`translateX(${100*e.findIndex(e=>e.id===t)}%)`}},s.id))})]})},7982:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var a=s(326),i=s(7577),r=s(4445),l=s(891),n=s(6777),d=s(1910),o=s(6592),c=s(6527),m=s(8690),u=s(6343),x=s(9522);let h=()=>{let[e,t]=(0,i.useState)("phantom"),[s,r]=(0,i.useState)(60),[l,n]=(0,i.useState)(4),d=(e=>{let t=[],s=180/e;for(let a=0;a<e;a++)t.push(a*s);return t})(l);return(0,a.jsxs)(m.Z,{title:"反投影模拟器",children:[(0,a.jsxs)("div",{className:"mb-4 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsx(u.Z,{label:"选择图像",options:[{id:"phantom",name:"模型"},{id:"abdomen",name:"腹部"}],value:e,onChange:t}),a.jsx(u.Z,{label:"扇形束角度",options:[{value:30,name:"30度"},{value:60,name:"60度"},{value:90,name:"90度"}],value:s,onChange:e=>r(parseInt(e))})]}),a.jsx(x.Z,{label:`投影数量: ${l}`,min:1,max:16,value:l,onChange:n,step:1}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"rounded-md border border-border bg-bg-100 p-4",children:[a.jsx("div",{className:"mb-2 text-sm font-medium text-text-100",children:"原始图像"}),a.jsx("div",{className:"aspect-square w-full overflow-hidden rounded-md bg-black",children:a.jsx("div",{className:"flex h-full items-center justify-center text-white",children:"phantom"===e?a.jsx("div",{className:"h-3/4 w-3/4 rounded-full border-4 border-white",children:a.jsx("div",{className:"mx-auto mt-8 h-1/3 w-1/2 rounded-full border-4 border-white"})}):(0,a.jsxs)("div",{className:"h-3/4 w-3/4 rounded-md border-4 border-white",children:[a.jsx("div",{className:"mx-auto mt-8 h-1/3 w-1/2 rounded-full border-4 border-white"}),a.jsx("div",{className:"mx-auto mt-4 h-1/6 w-2/3 rounded-md border-4 border-white"})]})})})]}),(0,a.jsxs)("div",{className:"rounded-md border border-border bg-bg-100 p-4",children:[a.jsx("div",{className:"mb-2 text-sm font-medium text-text-100",children:"反投影重建"}),a.jsx("div",{className:"aspect-square w-full overflow-hidden rounded-md bg-black",children:(0,a.jsxs)("div",{className:"relative h-full w-full",children:[d.map((e,t)=>a.jsx(c.E.div,{className:"absolute inset-0 bg-primary-100 opacity-20",initial:{opacity:0},animate:{opacity:.2},transition:{duration:.5,delay:.2*t},style:{transform:`rotate(${e}deg)`,width:"100%",height:90===s?"100%":`${s}%`,marginTop:90===s?0:`${(100-s)/2}%`}},t)),"phantom"===e?a.jsx("div",{className:"absolute left-1/2 top-1/2 h-3/4 w-3/4 -translate-x-1/2 -translate-y-1/2 rounded-full border-4 border-white opacity-30",children:a.jsx("div",{className:"mx-auto mt-8 h-1/3 w-1/2 rounded-full border-4 border-white opacity-30"})}):(0,a.jsxs)("div",{className:"absolute left-1/2 top-1/2 h-3/4 w-3/4 -translate-x-1/2 -translate-y-1/2 rounded-md border-4 border-white opacity-30",children:[a.jsx("div",{className:"mx-auto mt-8 h-1/3 w-1/2 rounded-full border-4 border-white opacity-30"}),a.jsx("div",{className:"mx-auto mt-4 h-1/6 w-2/3 rounded-md border-4 border-white opacity-30"})]})]})})]})]})]}),(0,a.jsxs)("div",{className:"rounded-md bg-bg-200 p-4 text-sm text-text-200",children:[a.jsx("h3",{className:"mb-2 font-medium text-text-100",children:"说明"}),a.jsx("p",{children:"此模拟器展示了CT重建中的反投影过程。左侧是原始图像，右侧是使用不同数量的投影角度进行反投影重建的结果。"}),a.jsx("p",{className:"mt-2",children:"注意观察：随着投影数量的增加，重建图像变得更加清晰，但仍然存在模糊。这就是为什么实际CT重建中需要使用滤波反投影技术。"})]})]})};var p=s(1755);let b=()=>{let[e,t]=(0,i.useState)("fracture"),[s,r]=(0,i.useState)(1),[l,n]=(0,i.useState)(!1),[d,o]=(0,i.useState)(0),[x,h]=(0,i.useState)([]);return(0,i.useEffect)(()=>{let e,t;if(l){let a=()=>{o(e=>{let t=e+.5;if(Math.floor(t/10)>Math.floor(e/10)){let e=10*Math.floor(t/10);e%(10*s)<1&&h(t=>[...t,e])}return t>=100?(n(!1),100):t}),d<100&&(e=requestAnimationFrame(a))};t=setTimeout(()=>{e=requestAnimationFrame(a)},500)}return()=>{cancelAnimationFrame(e),clearTimeout(t)}},[l,d,s]),(0,a.jsxs)(m.Z,{title:"螺旋CT模拟器",children:[(0,a.jsxs)("div",{className:"mb-4 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsx(u.Z,{label:"选择扫描对象",options:[{id:"fracture",name:"骨折"},{id:"liverLesions",name:"肝脏病变"}],value:e,onChange:t}),a.jsx(u.Z,{label:"螺距 (Pitch)",options:[{value:.5,name:"0.5 (重叠)"},{value:1,name:"1.0 (无间隙)"},{value:1.5,name:"1.5 (小间隙)"},{value:2,name:"2.0 (大间隙)"}],value:s,onChange:e=>r(parseFloat(e))})]}),(0,a.jsxs)("div",{className:"rounded-md border border-border bg-bg-100 p-4",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-text-100",children:"扫描进度"}),a.jsx(p.Z,{onClick:()=>{n(!0),o(0),h([])},disabled:l,size:"sm",children:l?"扫描中...":"开始扫描"})]}),a.jsx("div",{className:"h-8 w-full overflow-hidden rounded-full bg-bg-200",children:a.jsx(c.E.div,{className:"h-full bg-primary-100",style:{width:`${d}%`},initial:{width:"0%"},animate:{width:`${d}%`},transition:{duration:.3}})}),(0,a.jsxs)("div",{className:"mt-6 flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"relative h-64 w-full max-w-md overflow-hidden rounded-md bg-black",children:[a.jsx("div",{className:"absolute left-1/2 top-0 h-full w-24 -translate-x-1/2 bg-bg-300 opacity-30"}),(0,a.jsxs)(c.E.div,{className:"absolute left-1/2 top-0 z-10 h-12 w-48 -translate-x-1/2 rounded-full border-4 border-primary-100",style:{top:`${d}%`,display:l||d>0?"block":"none"},animate:{rotate:l?360:0},transition:{duration:1,repeat:l?1/0:0,ease:"linear"},children:[a.jsx("div",{className:"absolute -left-2 top-1/2 h-4 w-4 -translate-y-1/2 rounded-full bg-accent-100"}),a.jsx("div",{className:"absolute -right-2 top-1/2 h-4 w-4 -translate-y-1/2 rounded-full bg-accent-100"})]}),x.map((e,t)=>a.jsx(c.E.div,{className:"absolute left-1/2 z-0 h-2 w-24 -translate-x-1/2 bg-primary-100 opacity-40",style:{top:`${e}%`},initial:{opacity:0},animate:{opacity:.4},transition:{duration:.3}},t))]}),a.jsx("div",{className:"mt-4 text-center text-sm text-text-200",children:x.length>0?(0,a.jsxs)("p",{children:["已获取 ",x.length," 个切片"]}):a.jsx("p",{children:'点击"开始扫描"按钮开始模拟螺旋CT扫描'})})]})]})]}),(0,a.jsxs)("div",{className:"rounded-md bg-bg-200 p-4 text-sm text-text-200",children:[a.jsx("h3",{className:"mb-2 font-medium text-text-100",children:"说明"}),a.jsx("p",{children:"此模拟器展示了螺旋CT的扫描过程。螺距是指床移动距离与准直器宽度的比值："}),(0,a.jsxs)("ul",{className:"mt-2 list-inside list-disc space-y-1",children:[a.jsx("li",{children:"螺距 = 0.5：相邻螺旋之间有50%的重叠，图像质量高但辐射剂量大"}),a.jsx("li",{children:"螺距 = 1.0：相邻螺旋之间刚好无间隙"}),a.jsx("li",{children:"螺距 = 1.5 或 2.0：相邻螺旋之间有间隙，扫描速度快但可能丢失信息"})]})]})]})},j=JSON.parse('{"TN":"CT重建和螺旋CT","WL":"本页面介绍CT重建技术和螺旋CT的原理，包括反投影、滤波反投影和螺距的概念。","NS":[{"id":"backprojection","title":"反投影","description":"反投影是CT重建的基本方法，通过将投影数据\\"涂抹\\"回图像空间来重建图像。","content":"为了理解CT重建，我们首先需要理解计算机断层扫描仪的工作原理。简单来说，它通过在不同角度拍摄X射线投影来获取人体内部结构的信息。在任何给定角度，投影是一条由明暗像素组成的线，取决于X射线如何被组织衰减。有时人们谈论正弦图，它只是将所有不同角度的投影堆叠在一起形成的显示。","simulator":{"type":"backprojection","options":{"images":[{"id":"abdomen","name":"腹部","src":"/images/abdomen.png"},{"id":"phantom","name":"模型","src":"/images/phantom.png"}],"fanBeamAngles":[{"value":30,"name":"30度"},{"value":60,"name":"60度"},{"value":90,"name":"90度"}]}},"keyPoints":["反投影是将投影数据\\"涂抹\\"回图像空间的过程","标准反投影会产生模糊的图像","需要180度的数据才能重建图像","扇形束几何中，物体的一部分必须包含在所有180度的投影中才能正确重建"]},{"id":"filtered-backprojection","title":"滤波反投影","description":"滤波反投影通过在反投影前对投影数据应用滤波器来改善图像质量。","content":"正如您可能已经注意到的，反投影会使最终图像变模糊。为了解决由标准反投影创建的模糊问题，我们使用滤波反投影。滤波是指在进行反投影之前改变投影数据。所需的滤波器类型是高通滤波器，或锐化滤波器。这种类型的滤波器会增强投影中的锐边缘，并倾向于忽略平坦区域。因为高通滤波器实际上会在边缘处创建负像素，它会减去由反投影引起的额外模糊。","keyPoints":["滤波反投影使用高通滤波器来增强边缘","高通滤波器在边缘处创建负像素，减少模糊","滤波反投影是现代CT扫描仪中使用的标准重建方法"]},{"id":"helical-ct","title":"螺旋CT和螺距","description":"螺旋CT技术使用连续旋转的X射线源和探测器，同时患者床持续移动，形成螺旋扫描路径。","content":"早期的CT扫描仪一次只扫描人体的一个切片，然后再移动到下一个切片。因此，切片的厚度仅取决于CT探测器的宽度。由于扫描仪对准光束到探测器的宽度，切片厚度也可以说等于准直器宽度。现代CT技术使用所谓的螺旋（或\\"螺旋\\"）路径。在螺旋CT中，扫描仪不断旋转，患者床也不断移动。因此，在同一切片（z位置）获取两个CT投影的情况下构成了螺旋路径。如果床持续移动，那么构成了螺旋路径的是什么？现代螺旋CT从两个相隔180度的投影中平均（或\\"插值\\"）数据。光子无论是从组织\\"向前\\"还是\\"向后\\"通过，都会经历相同的衰减——因此相隔180度的角度是等效的。这种插值是为了将螺旋路径转换为横断面切片（看看在模拟中如果只重建180度会发生什么——你会得到螺旋）。这也解释了切片加宽的概念——每个点反映了来自两个z位置的数据，这些位置由床移动的速度决定，因为光束旋转180度。","simulator":{"type":"helical-ct","options":{"images":[]}}}]}');function v(){return(0,a.jsxs)("div",{className:"space-y-8 animate-fadeIn",children:[a.jsx(r.Z,{title:j.TN,description:j.WL}),j.NS.map(e=>a.jsx(l.Z,{title:e.title,description:e.description,className:"hover-lift",children:(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-text-200",children:e.content}),e.keyPoints&&a.jsx(n.Z,{points:e.keyPoints})]})},e.id)),a.jsx(d.Z,{title:"CT重建模拟器",children:(0,a.jsxs)(o.Z,{tabs:[{id:"backprojection",label:"反投影重建"},{id:"helical",label:"螺旋CT"}],children:[a.jsx("div",{id:"backprojection",className:"p-4",children:a.jsx(h,{})}),a.jsx("div",{id:"helical",className:"p-4",children:a.jsx(b,{})})]})})]})}},1755:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(326);s(7577);let i=({children:e,onClick:t,disabled:s=!1,size:i="md",className:r=""})=>a.jsx("button",{onClick:t,disabled:s,className:`rounded-md bg-primary-100 ${{sm:"px-2 py-1 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[i]} font-medium text-white shadow-sm transition-colors hover:bg-primary-200 focus:outline-none focus:ring-2 focus:ring-primary-100 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${r}`,children:e})},9892:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`E:\Projects\CTPhysics\app\reconstruction\page.jsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[649,891,237],()=>s(3978));module.exports=a})();